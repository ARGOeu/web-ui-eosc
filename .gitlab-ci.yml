stages:
  - tests
  -
job_tests:
  image: openjdk:8-alpine
  stage: tests
  script:
    - cd /opt
    - apk update && apk upgrade && apk add --no-cache bash git
    - git clone https://gitlab.in2p3.fr/cc-in2p3-dev/argo-eosc
    - MAVEN_VERSION=3.5.4
    - MAVEN_HOME=/usr/lib/mvn
    - PATH=$MAVEN_HOME/bin:$PATH
    - wget http://archive.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz &&  tar -zxvf apache-maven-$MAVEN_VERSION-bin.tar.gz &&  rm apache-maven-$MAVEN_VERSION-bin.tar.gz &&   mv apache-maven-$MAVEN_VERSION /usr/lib/mvn
    - mkdir /tmp/properties
    - echo "${devel_app_hidden_properties}" > /opt/argo-eosc/etc/app/app-hidden.properties
    - cd /opt/argo-eosc
    - echo "${pom_test}" > pom.xml
    - mvn exec:java
    


