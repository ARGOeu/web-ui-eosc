<VirtualHost *:80>
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L]
</VirtualHost>


<VirtualHost *:443>
   ServerName argo.egi.eu
   ProxyRequests On
   ProxyPreserveHost On
   ProxyVia On
   ServerAdmin argo@mailman.egi.eu
   ServerName argo.egi.eu
   ProxyPass /  https://localhost:8443/
   SSLProxyEngine On
   SSLEngine on
   SSLCertificateFile /opt/certificates/argo_egi_eu.crt
   SSLCertificateKeyFile /opt/certificates/argo.key
   SSLCertificateChainFile /opt/certificates/DigiCertCA.crt
   SSLProxyVerify none
   SSLProxyCheckPeerCN off
   SSLProxyCheckPeerName off
   SSLProxyCheckPeerExpire off
   SSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1    
   SSLHonorCipherOrder on   
   SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:ECDHE-RSA-AES128-SHA:DHE-RSA-AES128-GCM-SHA256:AES256+EDH:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4
   DocumentRoot /opt/argo-eosc
   CustomLog /var/log/httpd/access-egi.log combined
   ErrorLog /var/log/httpd/error-egi.log
</VirtualHost>

<VirtualHost *:443>
   ProxyRequests On
   ProxyPreserveHost On
   ProxyVia On
   ServerAdmin argo@mailman.egi.eu
   ServerName  ui.argo.grnet.gr
   ProxyPass /  https://localhost:8443/
   SSLProxyEngine On
   SSLEngine on
   SSLCertificateFile /opt/certificates/star_multi_argo_grnet_gr.crt
   SSLCertificateKeyFile /opt/certificates/star_devel_argo_grnet_gr.key
   SSLCertificateChainFile /opt/certificates/DigiCertCA.crt
   SSLProxyVerify none
   SSLProxyCheckPeerCN off
   SSLProxyCheckPeerName off
   SSLProxyCheckPeerExpire off
   SSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1    
   SSLHonorCipherOrder on   
   SSLCipherSuite "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4"
   SSLCompression off
   DocumentRoot /opt/argo-eosc
   CustomLog /var/log/httpd/access-ui.log combined
   ErrorLog /var/log/httpd/error-ui.log
</VirtualHost>

<VirtualHost *:443>
   ProxyRequests On
   ProxyPreserveHost On
   ProxyVia On
   ServerAdmin argo@mailman.egi.eu
   ServerName egi.ui.argo.grnet.gr
   ProxyPass /  https://localhost:8443/
   SSLProxyEngine On
   SSLEngine on
   SSLCertificateFile /opt/certificates/star_multi_argo_grnet_gr.crt
   SSLCertificateKeyFile /opt/certificates/star_devel_argo_grnet_gr.key
   SSLCertificateChainFile /opt/certificates/DigiCertCA.crt
   SSLProxyVerify none
   SSLProxyCheckPeerCN off
   SSLProxyCheckPeerName off
   SSLProxyCheckPeerExpire off
   SSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1    
   SSLHonorCipherOrder on   
SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:ECDHE-RSA-AES128-SHA:DHE-RSA-AES128-GCM-SHA256:AES256+EDH:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4
   SSLCompression off
   DocumentRoot /opt/argo-eosc
   CustomLog /var/log/httpd/access-egi.log combined
   ErrorLog /var/log/httpd/error-egi.log
</VirtualHost>

<VirtualHost *:443>
   ProxyRequests On
   ProxyPreserveHost On
   ProxyVia On
   ServerAdmin argo@mailman.egi.eu
   ServerName sdc.ui.argo.grnet.gr
   ProxyPass /  https://localhost:8443/
   SSLProxyEngine On
   SSLEngine on
   SSLCertificateFile /opt/certificates/star_multi_argo_grnet_gr.crt
   SSLCertificateKeyFile /opt/certificates/star_devel_argo_grnet_gr.key
   SSLCertificateChainFile /opt/certificates/DigiCertCA.crt
   SSLProxyVerify none
   SSLProxyCheckPeerCN off
   SSLProxyCheckPeerName off
   SSLProxyCheckPeerExpire off
   SSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1    
   SSLHonorCipherOrder on   
   SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:ECDHE-RSA-AES128-SHA:DHE-RSA-AES128-GCM-SHA256:AES256+EDH:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4
   SSLCompression off
   DocumentRoot /opt/argo-eosc
   CustomLog /var/log/httpd/access-sdc.log combined
   ErrorLog /var/log/httpd/error-sdc.log
</VirtualHost>
<VirtualHost *:443>
   ProxyRequests On
   ProxyPreserveHost On
   ProxyVia On
   ServerAdmin argo@mailman.egi.eu
   ServerName eudat.ui.argo.grnet.gr
   ProxyPass /  https://localhost:8443/
   SSLProxyEngine On
   SSLEngine on
   SSLCertificateFile /opt/certificates/star_multi_argo_grnet_gr.crt
   SSLCertificateKeyFile /opt/certificates/star_devel_argo_grnet_gr.key
   SSLCertificateChainFile /opt/certificates/DigiCertCA.crt
   SSLProxyVerify none
   SSLProxyCheckPeerCN off
   SSLProxyCheckPeerName off
   SSLProxyCheckPeerExpire off
   SSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1    
   SSLHonorCipherOrder on   
   SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:ECDHE-RSA-AES128-SHA:DHE-RSA-AES128-GCM-SHA256:AES256+EDH:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4
   SSLCompression off
   DocumentRoot /opt/argo-eosc
   CustomLog /var/log/httpd/access-eudat.log combined
   ErrorLog /var/log/httpd/error-eudat.log
</VirtualHost>
