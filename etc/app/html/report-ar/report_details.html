<!DOCTYPE html>
<html lang="en" xmlns:tpl="http://software.in2p3.fr/lavoisier/template.xsd">
<head tpl:include="/resource/app/html/header.html"></head>

<body class="sidebar-mini layout-fixed layout-navbar-fixed layout-footer-fixed" style="height: auto;" cz-shortcut-listen="true">
<div class="wrapper">

    <!-- Navbar -->
    <nav tpl:include="/resource/app/html/navbar.html"></nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <aside tpl:include="/resource/app/html/sidebar.html"></aside>
    <!-- /sidebar -->


    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">

                    </div><!-- /.col -->
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">

                            <li class="breadcrumb-item" tpl:foreach="root">Report Details - {{@tenant}} > {{@report}}
                            </li>

                        </ol>
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </div><!-- /.container-fluid -->
        </div>
        <!-- /.content-header -->

        <!-- Main content -->
        <div class="content">
            <div class="container-fluid">


                <div class="card">
                    <div class="card-header">
                        <span class="fa fa-info-circle"></span> Global information
                    </div>
                    <div class="card-body">
                        <ul tpl:foreach="root/report[@active]">
                            <li><label class="m-1">Tenant : </label> {{@tenant}}</li>
                            <li><label class="m-1">Name : </label> {{@name}}</li>
                            <li><label class="m-1">Description : </label> {{@description}}</li>
                        </ul>
                        <footer class="blockquote-footer float-right">Last Update: {{root/report[@active]/@updated }}
                        </footer>
                    </div>

                </div>


                <ul class="nav nav-tabs" id="myTab" role="tablist">

                    <li class="nav-item">
                        <a class="nav-link active" id="table-topo" data-toggle="tab" href="#topo" role="tab"
                           aria-controls="topo" aria-selected="true"><span class="fa fa-sitemap "></span> Topology</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="table-metrics" data-toggle="tab" href="#metrics" role="tab"
                           aria-controls="metrics" aria-selected="true"><span class="fa fa-project-diagram "></span>
                            Metrics Profiles</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" id="table-agg" data-toggle="tab" href="#agg" role="tab" aria-controls="agg"
                           aria-selected="true"><span class="fa fa-calculator"></span> Aggregation Profiles</a>
                    </li>

                    <li class="nav-item" tpl:if="count(root/report/profiles/thresholds_profiles/object)&gt;0">
                        <a class="nav-link" id="table-thresholds" data-toggle="tab" href="#thresholds" role="tab" aria-controls="thresholds"
                           aria-selected="true"><i class="fas fa-layer-group"></i> Thresholds Profiles</a>
                    </li>

                </ul>
                <div class="tab-content" id="myTabContent">


                    <div class="tab-pane fade show active" id="topo" role="tabpanel" aria-labelledby="table-topo">
                        <div class="card">
                            <div class="row  m-3 p-3" tpl:foreach="root/report[@active]">
                                <ul class="list-group m-2">
                                    <li class="list-group-item active">{{group_type/text()}}<span
                                            class="badge badge-light m-1 p-1 float-right">{{group_count/text()}}</span>
                                    </li>
                                    <li class="list-group-item" tpl:foreach="group_list/item">{{text()}}</li>
                                </ul>

                                <ul class="list-group m-2">
                                    <li class="list-group-item active">{{endpoint_group_type/text()}}<span
                                            class="badge badge-light m-1 p-1 float-right">{{endpoint_group_count/text()}}</span>
                                    </li>
                                    <li class="list-group-item" tpl:foreach="endpoint_group_list/item">{{text()}}</li>
                                </ul>

                                <ul class="list-group m-2">
                                    <li class="list-group-item active">SERVICETYPE<span
                                            class="badge badge-light m-1 p-1 float-right">{{service_count/text()}}</span>
                                    </li>
                                    <li class="list-group-item" tpl:foreach="service_list/item">{{text()}}</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane fade show" id="metrics" role="tabpanel" aria-labelledby="table-metrics">

                        <div class="card" tpl:foreach="root/report[@active]">
                            <div class="row m-3 p-3">
                                <div class="col-3" tpl:foreach="profiles/metrics/object/data/object/services/object">

                                    <ul class="list-group m-2">
                                        <li class="list-group-item active">{{service/text()}}<span
                                                class="badge badge-light m-1 p-1 float-right">{{count(metrics/item)}}</span>
                                        </li>
                                        <li class="list-group-item" tpl:foreach="metrics/item">{{text()}}</li>
                                    </ul>

                                </div>


                            </div>

                        </div>
                    </div>
                    <div class="tab-pane fade show" id="agg" role="tabpanel" aria-labelledby="table-agg">

                        <div class="card" tpl:foreach="root/report[@active]">
                            <div class="row m-3 p-3">
                                <div class="col-3" tpl:foreach="profiles/aggregation/object/data/object/groups/object">

                                    <ul class="list-group m-2">
                                        <li class="list-group-item active">{{name/text()}}<span
                                                class="badge badge-light m-1 p-1 float-right">{{operation/text()}}</span>
                                        </li>
                                        <li class="list-group-item" tpl:foreach="services/object">{{name/text()}}<span
                                                class="badge badge-light m-1 p-1 float-right">{{operation/text()}}</span>
                                        </li>
                                    </ul>

                                </div>


                            </div>

                        </div>
                    </div>

                    <div class="tab-pane fade show" id="thresholds" role="tabpanel" aria-labelledby="table-thresholds">
                        <div class="pull-right">
<!--                            <button class="btn btn-primary fa fa-question-circle m-2" style="align:right" type="button" data-toggle="modal" data-target="#ModalDoc"  >-->
<!--                                Documentation-->
<!--                            </button>-->
                            <a href="https://argoeu.github.io/argo-monitoring/docs/Profiles/thresholds-profile" target="_blank" alt="link to the doc of treshold profiles">
                                <button class="btn btn-primary fa fa-question-circle m-2 p-1"  type="button"> Documentation</button>
                            </a>
                            <div class="modal fade" id="ModalDoc" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Threshold Documentation</h5>
                                            <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">x</button>
                                        </div>
                                        <div class="modal-body">
                                            The thresholds is defined by following this format
                                            <span class="label label-default">'label'=value[UOM];[warn];[crit];[min];[max]</span>
                                            <br/>
                                            <ul> <li><strong>label :</strong> can contain alphanumeric characters but must always begin with a letter</li>
                                                <li><strong>value :</strong> is a float or integer</li>
                                                <li><strong>uom :</strong> is a string unit of measurement (accepted values: s,us,ms,B,KB,MB,TB,%,c)</li>
                                                <li><strong>warning:</strong> is a range defining the warning threshold limits</li>
                                                <li><strong>critical:</strong> is a range defining the critical threshold limits</li>

                                            </ul>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Modal -->
                        <div class="card m-2" tpl:foreach="root/report/profiles/thresholds_profiles/object/data/object">
                            <div class="card-header bg-primary">
                                <h3>{{name/text()}}
                                </h3>
                            </div>
                            <div class="card-body">
                                <table class="table dataTable">
                                    <tr>
                                        <th>Group</th>
                                        <th>Host</th>
                                        <th>Metrics</th>
                                        <th colspan="6" class="text-center">Thresholds</th>
                                    </tr>
                                    <tr>
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                        <th>Threshold</th>
                                        <th>label/value/uom</th>
                                        <th>warning</th>
                                        <th>critical</th>
                                        <th>min</th>
                                        <th>max</th>
                                    </tr>
                                    <tr tpl:foreach="rules/object/thresholds/test">

                                        <td>{{ancestor::object/endpoint_group/text()}}</td>
                                        <td>{{ancestor::object/host/text()}}</td>
                                        <td>{{ancestor::object/metric/text()}}</td>
                                        <td>{{text()}}</td>
                                        <td>{{token[1]/text()}}</td>
                                        <td>{{token[2]/text()}}</td>
                                        <td>{{token[3]/text()}}</td>
                                        <td>{{token[4]/text()}}</td>
                                        <td>{{token[5]/text()}}</td>

                                    </tr>
                                </table>

                            </div>

                        </div>
                    </div>

                </div>

                <div class="row clear-fix" style="padding:50px"></div>



            </div>


            <!-- /.container-fluid -->
            <!-- /.content -->
        </div>
    </div>
    <!-- /.content-wrapper -->
    <!-- Main Footer -->
    <footer tpl:include="/resource/app/html/footer.html"></footer>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->


<!-- jQuery -->
<script src="/resource/app/html/adminlte/plugins/jquery/jquery.min.js?v={$app.version}"></script>
<!-- Bootstrap -->
<script src="/resource/app/html/adminlte/plugins/bootstrap/js/bootstrap.bundle.min.js?v={$app.version}"></script>
<!-- adminlte -->
<script src="/resource/app/html/adminlte/dist/js/adminlte2.min.js?v={$app.version}"></script>

<!--<script src="/resource/app/js/dashboard.js?v={$app.version}"></script>-->


<script type="text/javascript" charset="utf8"
        src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.bootstrap4.min.js"></script>


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.colVis.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/scroller/1.5.0/js/dataTables.scroller.min.js"></script>
<script src="https://cdn.datatables.net/select/1.2.6/js/dataTables.select.min.js"></script>
<script src="https://cdn.datatables.net/colreorder/1.5.0/js/dataTables.colReorder.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.2.2/js/dataTables.responsive.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.2.2/js/responsive.bootstrap4.min.js"></script>


<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.2.6/css/select.dataTables.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.bootstrap4.min.css"/>
<link rel="stylesheet" type="text/css"
      href="https://cdn.datatables.net/colreorder/1.5.0/css/colReorder.bootstrap4.min.css"/>
<link rel="stylesheet" type="text/css"
      href="https://cdn.datatables.net/scroller/1.5.0/css/scroller.bootstrap4.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.2.6/css/select.bootstrap4.min.css"/>
<link rel="stylesheet" type="text/css"
      href="https://cdn.datatables.net/responsive/2.2.2/css/responsive.bootstrap4.min.css"/>


<script src="/resource/app/js/filter.js?v={$app.version}"></script>
<script src="/resource/app/js/dataTable.js?v={$app.version}"></script>
<script src="/resource/app/js/ar_chart.js?v={$app.version}"></script>

<script src="/resource/app/html/adminlte/plugins/chart.js/Chart.min.js?v={$app.version}"></script>


<style>
 #ar_wrapper .dt-buttons {
float:left;
}
 #ar_wrapper .dataTables_filter{
float:right;
}
 #ar_wrapper .dataTables_length{
float:right;
}

</style>


<script src="/resource/app/js/dashboard.js?v={$app.version}"></script>
<script src="/resource/app/html/adminlte/plugins/select2/select2.full.min.js?v={$app.version}"></script>
<script src="/resource/app/js/select.js?v={$app.version}"></script>

</body>
</html>
