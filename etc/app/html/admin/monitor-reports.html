<!DOCTYPE html>
<html tpl:variable.pdf="'paspdf'" lang="en" xmlns:tpl="http://software.in2p3.fr/lavoisier/template.xsd"
      xmlns:date="http://exslt.org/dates-and-times">
<head tpl:include="/resource/app/html/header.html"></head>

<body class="sidebar-mini layout-fixed layout-navbar-fixed layout-footer-fixed"
      cz-shortcut-listen="true">
<div class="wrapper">

    <!-- Navbar -->
    <nav tpl:include="/resource/app/html/navbar.html"></nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <aside tpl:include="/resource/app/html/sidebar.html"></aside>
    <!-- /sidebar -->


    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-9">

                        </div><!-- /.col -->
                        <div class="col-sm-3">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="/monitor-reports">Report Checkings </a></li>
                                <li class="breadcrumb-item active small">Last update : {{/tenants/@date}}</li>

                            </ol>
                        </div><!-- /.col -->
                    </div><!-- /.row -->
                </div><!-- /.container-fluid -->
            </div>

        <!-- Main content -->
        <div class="content">


            <div class="container-fluid">
                <div class="card">
                    <div class="card-body">
                        <table id="reportMonitor" class="table-responsive-lg table datatable table-condensed table-hover m-4">
                            <thead>
                            <th>Tenant</th>
                            <th>Report</th>
                            <th>Topology</th>
                            <th>Nb groups</th>
                            <th>Nb results</th>
                            </thead>
                            <tbody>
                            <tr tpl:foreach="/tenants/tenant/reports/report">
                                <td>
                                    <span class="badge badge-primary ml-1 m">{{ancestor::reports/@tenant}}</span>
                                </td>

                                <td>
                                    <span class="badge badge-primary ml-1 m">{{ancestor::reports/@name}}</span>
                                </td>

                                <td tpl:if="not(@exception)">
                                    <span class="badge badge-success ml-1 m">{{@topology}}</span>
                                </td>
                                <td tpl:else=""><span class="badge badge-critical">{{@topology}} </span></td>

                                <td tpl:if="not(@exception) and @groups>0">
                                    <span  class="badge  border bg-success border-dark">{{ @groups}}</span>
                                </td>
                                <td tpl:else="not(@exception) and @groups=0">
                                    <span class="badge  border bg-critical border-dark">0</span>
                                </td>
                                <td data-sort="0" tpl:else="@exception"><span class="m-2 badge bg-critical">CALL TO API FAILED !</span></td>

                                <td tpl:if="not(@exception) and @results>=@groups"><span
                                        class="badge  border bg-success border-dark">{{ @results}}</span></td>
                                <td tpl:else="not(@exception) and @results&lt;@groups"><span
                                        class="badge  border bg-critical border-dark">{{ @results}}</span></td>
                                <td data-sort="0" tpl:else="@exception"><span class="m-2 badge bg-critical">CALL TO API FAILED !</span></td>
                                <td tpl:else=""><span   class="badge  border bg-critical border-dark">{{ @results}}</span></td>
                            </tr>

                            <tr tpl:foreach="/tenants/tenant/reports/report/report">
                                <td>
                                    <span class="badge badge-primary ml-1 m">{{ancestor::reports/@tenant}}</span>
                                </td>

                                <td>
                                    <span class="badge badge-primary ml-1 m">{{ancestor::reports/@name}}</span>
                                </td>

                                <td tpl:if="not(@exception)">
                                    <span class="badge badge-success ml-1 m">{{@topology}} / {{@entity1}}{{@group}}</span>
                                </td>
                                <td tpl:else=""><span class="badge badge-critical">{{@topology}} / {{@entity1}}{{@group}}</span></td>

                                <td tpl:if="not(@exception) and @groups>0">
                                    <span  class="badge  border bg-success border-dark">{{ @groups}}</span>
                                </td>
                                <td tpl:else="not(@exception) and @groups=0">
                                    <span class="badge  border bg-critical border-dark">0</span>
                                </td>
                                <td data-sort="0" tpl:else="@exception"><span class="m-2 badge bg-critical">CALL TO API FAILED !</span></td>

                                <td tpl:if="not(@exception) and @results>=@groups"><span
                                        class="badge  border bg-success border-dark">{{ @results}}</span></td>
                                <td tpl:else="not(@exception) and @results&lt;@groups"><span
                                        class="badge  border bg-critical border-dark">{{ @results}}</span></td>
                                <td data-sort="0" tpl:else="@exception"><span class="m-2 badge bg-critical">CALL TO API FAILED !</span></td>
                                <td tpl:else=""> <span    class="badge  border bg-critical border-dark">{{ @results}}</span></td>
                            </tr>

                            </tbody>
                        </table>


                    </div>

                </div>
                <br/><br/>
            </div>

        </div>

        <!-- /.container-fluid -->

        <!-- /.content -->
    </div>

    <!-- /.content-wrapper -->
    <!-- Main Footer -->
    <footer tpl:include="/resource/app/html/footer.html"></footer>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->


<!-- jQuery -->
<script src="/resource/app/html/adminlte/plugins/jquery/jquery.min.js?v={$app.version}"></script>
<!-- Bootstrap -->
<script src="/resource/app/html/adminlte/plugins/bootstrap/js/bootstrap.bundle.min.js?v={$app.version}"></script>
<!-- adminlte -->
<script src="/resource/app/html/adminlte/dist/js/adminlte2.min.js?v={$app.version}"></script>



<script type="text/javascript" charset="utf8"
        src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.bootstrap4.min.js"></script>


<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.bootstrap4.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.2.6/css/select.bootstrap4.min.css"/>
<link rel="stylesheet" type="text/css"     href="https://cdn.datatables.net/responsive/2.2.2/css/responsive.bootstrap4.min.css"/>

<script src="/resource/app/js/dataTable.js?v={$app.version}"></script>


</body>
</html>
