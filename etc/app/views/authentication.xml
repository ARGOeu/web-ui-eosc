<views xmlns="http://software.in2p3.fr/lavoisier/application.xsd"
       xmlns:e="http://software.in2p3.fr/lavoisier/entries.xsd" xmlns:t="http://software.in2p3.fr/lavoisier/tables.xsd">
    <!-- 
        Project : argo-eosc 
        File    : authentication.xml
        Created by cyril on 2019/04/03 
    -->

    <view name="oauth" authenticators="aai">

        <connector type="XMLConnector">
            <parameter name="content" eval="new_element('root')"/>
        </connector>

        <processors>
            <element in="root">
                <element-create>new_element('user',user())</element-create>
                <element-create>new_element('sub',user('sub'))</element-create>
                <element-create>new_element('email',user('email'))</element-create>
                <element-create>new_element('given_name',user('given_name'))</element-create>
                <element-create>new_element('token',user('token'))</element-create>
            </element>
        </processors>

        <renderers>
            <renderer type="HTMLRenderer">
                <parameter name="template">app/html/profile.html</parameter>
            </renderer>
        </renderers>

    </view>

    <view name="profile" authenticators="aai">
        <connector type="XMLConnector">
            <parameter name="content" eval="new_element('root')"/>
        </connector>

        <processors>
            <element in="root">
                <element-create>new_element('user',user())</element-create>
            </element>
        </processors>

        <renderers>
            <renderer type="HTMLRenderer">
                <parameter name="template">app/html/profile.html</parameter>
            </renderer>
        </renderers>
    </view>



</views>